name: CI/CD Pipeline Example

# Triggers the workflow on push and pull request events
on: [push, pull_request]

jobs: # <-- This section defines your sequential or parallel "stages"
  build:
    runs-on: ubuntu-latest # The environment where the job runs
    steps:
      - uses: actions/checkout@v4 # Checkout the repository code
      - name: Build Code Artifacts
        run: |
          echo "Starting the Build Stage..."
          # Your build commands go here (e.g., npm install, maven build)
          
  test:
    runs-on: ubuntu-latest
    needs: [build] # <-- CRITICAL: This ensures 'test' only runs AFTER 'build' finishes successfully
    steps:
      - uses: actions/checkout@v4
      - name: Run Unit Tests
        run: |
          echo "Starting the Test Stage..."
          # Your test commands go here (e.g., npm test)

  deploy:
    runs-on: ubuntu-latest
    needs: [test] # <-- This ensures 'deploy' only runs AFTER 'test' finishes successfully
    environment: production # Used for security and deployment tracking
    steps:
      - uses: actions/checkout@v4
      - name: Deploy to Cloud Instance
        run: |
          echo "Starting the Deploy Stage..."
          # Your deployment commands go here (e.g., push to AEM/Azure)